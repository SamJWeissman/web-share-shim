// @asset(/libraries/web-share-shim/web-share-shim.html)
export default(function(){if(navigator.share)return;let a=navigator.userAgent.match(/Android/i),b=navigator.userAgent.match(/iPhone|iPad|iPod/i),c=!(b||a),d={whatsapp:(a)=>(c?'https://api.whatsapp.com/send?text=':'whatsapp://send?text=')+a,telegram:(a)=>(c?'https://telegram.me/share/msg?url='+location.host+'&text=':'tg://msg?text=')+a,facebook:(a,b,d)=>b?(c?'https://www.facebook.com/dialog/share?app_id='+b+'&display=popup&href='+d+'&redirect_uri='+encodeURIComponent(location.href)+'&quote=':'fb-messenger://share/?message=')+a:'',email:(a)=>'mailto:?body='+a,sms:(a)=>'sms:?body='+a};const e=new class{_init(){if(this._initialized)return Promise.resolve();this._initialized=!0;const a=fetch('/libraries/web-share-shim/web-share-shim.html').then((a)=>a.text());return a.then((a)=>{const b=document.createElement('div');b.innerHTML=a,this.$root=b.querySelector('.web-share'),this.$whatsapp=b.querySelector('.web-share-whatsapp'),this.$facebook=b.querySelector('.web-share-facebook'),this.$telegram=b.querySelector('.web-share-telegram'),this.$email=b.querySelector('.web-share-email'),this.$sms=b.querySelector('.web-share-sms'),this.$copy=b.querySelector('.web-share-copy'),this.$copy.onclick=()=>this._copy(),this.$root.onclick=()=>this._hide(),this.$root.classList.toggle('desktop',c),document.body.appendChild(b)})}_setPayload(a){let b=a.title+' '+a.text+' '+a.url,c=a.facebookId||'158651941570418';this.payload=b,b=encodeURIComponent(b),this.$whatsapp.href=d.whatsapp(b),this.$facebook.href=d.facebook(b,c,a.url),this.$telegram.href=d.telegram(b),this.$email.href=d.email(b),this.$sms.href=d.sms(b)}_copy(){const a=document.createElement('span');a.textContent=this.payload,a.style.whiteSpace='pre';const b=document.createElement('iframe');b.sandbox='allow-same-origin',document.body.appendChild(b);let c=b.contentWindow;c.document.body.appendChild(a);let d=c.getSelection();d||(c=window,d=c.getSelection(),document.body.appendChild(a));const e=c.document.createRange();d.removeAllRanges(),e.selectNode(a),d.addRange(e);let f=!1;try{f=c.document.execCommand('copy')}catch(a){}return d.removeAllRanges(),a.remove(),b.remove(),f}show(a){return this._init().then(()=>{this._setPayload(a),this.$root.classList.add('web-share-visible')})}_hide(){this.$root.classList.remove('web-share-visible')}};navigator.share=function(a){return e.show(a)}})();